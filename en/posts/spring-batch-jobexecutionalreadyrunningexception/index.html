<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Spring Batch JobExecutionAlreadyRunningException</title>
<link rel=icon href=/images/favicon.ico type=image/x-icon><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/baseof.css><link rel=stylesheet href=/css/menu.css><link rel=stylesheet href=/css/header.css><link rel=stylesheet href=/css/footer.css><link rel=stylesheet href=/css/single.css><link rel=stylesheet href=/css/tags.css><link rel=stylesheet href=/css/categories.css><link rel=stylesheet href=/css/list.css><script type=text/javascript src=/js/common.js></script><link rel=stylesheet href=/css/search.css><script type=text/javascript src=/js/search.js></script><link rel=stylesheet href=/css/slide.css><link rel=stylesheet href=/css/toc.css><link rel=stylesheet href=/css/languages.css><script type=text/javascript src=/js/languages.js></script><meta name=naver-site-verification content="daa2ba2288694ebfa088819a634dfd7ec01eca78"><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-TN5ZTCPB")</script></head><body><div class="container flex"><aside class=menu-wrapper><div class=menu-content><div class=menu-inner-content><nav><div class=menu-title-wrapper><a href=/><img class=menu-title src=/images/title.png alt=title></a></div><div class=menu-logo-wrapper><img class=menu-logo src=/images/logo.png alt=logo></div><input class=search-input type=text placeholder=Search><ul class=languages-container onclick=onToggleLanguages()><li><input class=toggle type=checkbox id=languages>
<label for=languages class="flex justify-between"><a><img src=/svg/translate.svg class=language-icon alt=Languages>English</a></label><ul class=languages-items><li><div class="languages-option 한국어" onclick='window.location.href="/ko/"'><p>한국어</p></div></li><li><div class="languages-option English" onclick='window.location.href="/en/"'><p>English</p></div></li></ul></li></ul><div class=menu-item><a href=/en/about/>About</a>
<a href=/en/posts/>Posts</a>
<a href=/en/categories/>Categories</a>
<a href=/en/tags/>Tags</a></div></nav><div class=footer-wrapper><hr><div class=links><div class=link-item><a href=https://github.com/pcm9881 target=_blank><img class=link-icon src=/svg/github-mark.svg></a></div></div><div class=footer-copyright>&copy; Copyright 2023 pcm9881</div><div class=powered-by>Powered by <a href=https://gohugo.io/>Hugo</a> and
<a href=https://github.com/pcm9881/hugo-jindo>Hugo Jindo</a> theme.</div></div></div></div></aside><div class=page-wrapper><div class=page-content><section id=main><div><article class=article-content><h1 id=spring-batch-jobexecutionalreadyrunningexception-a-job-execution-for-this-job-is-already-running>Spring Batch JobExecutionAlreadyRunningException: A job execution for this job is already running</h1><h2 id=내용>내용</h2><p><code>Spring Batch</code>가 예기치 못한 상황으로 인해 비정상 종료된 경우에 실행할 때 이미 <code>job</code>이 실행중일 때 발생하는 <code>Exception</code>입니다.</p><h2 id=해결방안>해결방안</h2><h3 id=콘솔에서-jobinstance-id-확인>콘솔에서 JobInstance ID 확인</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>A job execution for this job is already running: JobInstance: id={JobInstance ID}, version=0, Job=[{Job Name}]
</span></span></code></pre></div><h3 id=batch_job_execution-테이블-status상태-exit_code종료코드-수정>BATCH_JOB_EXECUTION 테이블 status(상태), exit_code(종료코드) 수정</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>UPDATE</span>
</span></span><span style=display:flex><span>    batch_job_execution
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span>
</span></span><span style=display:flex><span>    end_time <span style=color:#f92672>=</span> now(),
</span></span><span style=display:flex><span>    status <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;COMPLETED&#39;</span>,
</span></span><span style=display:flex><span>    exit_code <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;FAILED&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>   job_execution_id <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>{</span>JobInstance ID<span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>      (<span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>         <span style=color:#66d9ef>MAX</span>(job_execution_id)
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>         batch_job_execution
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>         job_execution_id <span style=color:#f92672>=</span> <span style=color:#f92672>#</span><span style=color:#960050;background-color:#1e0010>{</span>JobInstance ID<span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>      );
</span></span></code></pre></div><h2 id=참조>참조</h2><ul><li><a href=https://stackoverflow.com/questions/51081634/batch-job-fails-because-of-jobexecutionalreadyrunningexception-a-job-execution>https://stackoverflow.com/questions/51081634/batch-job-fails-because-of-jobexecutionalreadyrunningexception-a-job-execution</a></li></ul></article></div></section><aside class=content-meta><div><section><h4 id=date>Thu Feb 15, 2024</h4><h5 id=wordcount>84 Words</h5></section><ul id=tags><li><a href=/en/tags/spring-boot/>spring-boot</a></li><li><a href=/en/tags/spring-batch/>spring-batch</a></li></ul></div><div><a class=previous href=/en/posts/generate-favicon/>Generate Favicon</a></div></aside></div></div><div class=toc-wrapper></div></div></body></html>
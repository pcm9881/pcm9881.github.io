<!doctype html><html lang=ko><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Spring Boot Jpa Test Project 생성</title>
<link rel=icon href=/images/favicon.ico type=image/x-icon><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/baseof.css><link rel=stylesheet href=/css/menu.css><link rel=stylesheet href=/css/header.css><link rel=stylesheet href=/css/footer.css><link rel=stylesheet href=/css/single.css><link rel=stylesheet href=/css/tags.css><link rel=stylesheet href=/css/categories.css><link rel=stylesheet href=/css/list.css><script type=text/javascript src=/js/common.js></script><link rel=stylesheet href=/css/search.css><script type=text/javascript src=/js/search.js></script><link rel=stylesheet href=/css/slide.css><link rel=stylesheet href=/css/toc.css><link rel=stylesheet href=/css/languages.css><script type=text/javascript src=/js/languages.js></script><meta name=naver-site-verification content="daa2ba2288694ebfa088819a634dfd7ec01eca78"><meta name=google-site-verification content="mHVGjlxLfXn6M6RteYvvmXlysqbIb_O5FACoF87pywo"><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-TN5ZTCPB")</script></head><body><div class="container flex"><aside class=menu-wrapper><div class=menu-content><div class=menu-inner-content><nav><div class=menu-title-wrapper><a href=/><img class=menu-title src=/images/title.png alt=title></a></div><div class=menu-logo-wrapper><img class=menu-logo src=/images/logo.png alt=logo></div><input class=search-input type=text placeholder=검색><ul class=languages-container onclick=onToggleLanguages()><li><input class=toggle type=checkbox id=languages>
<label for=languages class="flex justify-between"><a><img src=/svg/translate.svg class=language-icon alt=Languages>한국어</a></label><ul class=languages-items><li><div class="languages-option 한국어" onclick='window.location.href="/ko/"'><p>한국어</p></div></li><li><div class="languages-option English" onclick='window.location.href="/en/"'><p>English</p></div></li></ul></li></ul><div class=menu-item><a href=/ko/about/>소개</a>
<a href=/ko/posts/>포스트</a>
<a href=/ko/categories/>카테고리</a>
<a href=/ko/tags/>태그</a></div></nav><div class=footer-wrapper><hr><div class=links><div class=link-item><a href=https://github.com/pcm9881 target=_blank><img class=link-icon src=/svg/github-mark.svg></a></div></div><div class=footer-copyright>&copy; Copyright 2023 pcm9881</div><div class=powered-by>Powered by <a href=https://gohugo.io/>Hugo</a> and
<a href=https://github.com/pcm9881/hugo-jindo>Hugo Jindo</a> theme.</div></div></div></div></aside><div class=page-wrapper><div class=page-content><section id=main><div><article class=article-content><h1 id=spring-boot-jpa-test-project-생성>Spring Boot JPA Test Project 생성</h1><p>JPA 관련 테스트를 진행하기 위해 프로젝트를 만드는 내용을 정리했습니다.</p><h2 id=openjdk-17-설치>OpenJDK 17 설치</h2><p>작성자는 MacOS를 사용중입니다. <a href=https://brew.sh/>brew</a>를 활용해서 설치하겠습니다.</p><h3 id=brew-install-openjdk-17>Brew Install OpenJDK 17</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install openjdk@17
</span></span></code></pre></div><h3 id=시스템-등록-심볼릭-링크>시스템 등록 (심볼릭 링크)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ln -sfn /usr/local/opt/openjdk@17/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-17.jdk
</span></span></code></pre></div><h2 id=테스트-데이터베이스-생성>테스트 데이터베이스 생성</h2><p>이해를 돕기 위해 내용을 작성했지만 <code>데이터베이스명</code>과 <code>테이블명</code> 또는 <code>유저명</code>, <code>유저비밀번호</code>는 직접 다르게 설정하셔도 무관합니다.
자세한 설명을 보고 싶으면 <a href=/ko/>PostgreSQL 데이터베이스 생성</a>에서 참조하시면 됩니다.</p><h3 id=데이터베이스-생성>데이터베이스 생성</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>database</span> jpa_db;
</span></span></code></pre></div><h3 id=유저-생성>유저 생성</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>user</span> jpa_user <span style=color:#66d9ef>with</span> <span style=color:#66d9ef>encrypted</span> password <span style=color:#e6db74>&#39;jpa_password&#39;</span>;
</span></span></code></pre></div><h3 id=데이터베이스-유저-전체권한-설정>데이터베이스 유저 전체권한 설정</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>grant</span> <span style=color:#66d9ef>all</span> <span style=color:#66d9ef>privileges</span> <span style=color:#66d9ef>on</span> <span style=color:#66d9ef>database</span> jpa_db <span style=color:#66d9ef>to</span> jpa_user;
</span></span></code></pre></div><h2 id=spring-boot-32-maven-프로젝트-생성>Spring Boot 3.2 Maven 프로젝트 생성</h2><h3 id=applicationproperties-설정>application.properties 설정</h3><h4 id=jpa>JPA</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.database</span><span style=color:#f92672>=</span><span style=color:#e6db74>postgresql</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.database-platform</span><span style=color:#f92672>=</span><span style=color:#e6db74>org.hibernate.dialect.PostgreSQLDialect</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.properties.hibernate.dialect</span><span style=color:#f92672>=</span><span style=color:#e6db74>org.hibernate.dialect.PostgreSQLDialect</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.generate-ddl</span><span style=color:#f92672>=</span><span style=color:#e6db74>false</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.hibernate.ddl-auto</span><span style=color:#f92672>=</span><span style=color:#e6db74>none</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.hibernate.jdbc.time_zone</span><span style=color:#f92672>=</span><span style=color:#e6db74>Asia/Seoul</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.show-sql</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span></code></pre></div><h4 id=postgresql>PostgreSQL</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.driver-class-name</span><span style=color:#f92672>=</span><span style=color:#e6db74>org.postgresql.Driver</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.url</span><span style=color:#f92672>=</span><span style=color:#e6db74>jdbc:postgresql://localhost:5432/jpa_db</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.username</span><span style=color:#f92672>=</span><span style=color:#e6db74>jpa_user</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.password</span><span style=color:#f92672>=</span><span style=color:#e6db74>jpa_password</span>
</span></span></code></pre></div><h4 id=flyway>Flyway</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>spring.flyway.baselineOnMigrate</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>flyway.url</span><span style=color:#f92672>=</span><span style=color:#e6db74>jdbc:postgresql://localhost:5432/jpa_db</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>flyway.user</span><span style=color:#f92672>=</span><span style=color:#e6db74>jpa_user</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>flyway.password</span><span style=color:#f92672>=</span><span style=color:#e6db74>jpa_password</span>
</span></span></code></pre></div><h4 id=전문>전문</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#75715e># JPA</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.database</span><span style=color:#f92672>=</span><span style=color:#e6db74>postgresql</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.database-platform</span><span style=color:#f92672>=</span><span style=color:#e6db74>org.hibernate.dialect.PostgreSQLDialect</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.properties.hibernate.dialect</span><span style=color:#f92672>=</span><span style=color:#e6db74>org.hibernate.dialect.PostgreSQLDialect</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.generate-ddl</span><span style=color:#f92672>=</span><span style=color:#e6db74>false</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.hibernate.ddl-auto</span><span style=color:#f92672>=</span><span style=color:#e6db74>none</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.hibernate.jdbc.time_zone</span><span style=color:#f92672>=</span><span style=color:#e6db74>Asia/Seoul</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.jpa.show-sql</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># PostgreSQL</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.driver-class-name</span><span style=color:#f92672>=</span><span style=color:#e6db74>org.postgresql.Driver</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.url</span><span style=color:#f92672>=</span><span style=color:#e6db74>jdbc:postgresql://localhost:5432/jpa_db</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.username</span><span style=color:#f92672>=</span><span style=color:#e6db74>jpa_user</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.password</span><span style=color:#f92672>=</span><span style=color:#e6db74>jpa_password</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Flyway</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.flyway.baselineOnMigrate</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>flyway.url</span><span style=color:#f92672>=</span><span style=color:#e6db74>jdbc:postgresql://localhost:5432/jpa_db</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>flyway.user</span><span style=color:#f92672>=</span><span style=color:#e6db74>jpa_user</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>flyway.password</span><span style=color:#f92672>=</span><span style=color:#e6db74>jpa_password</span>
</span></span></code></pre></div><h3 id=flyway-테이블-생성>Flyway 테이블 생성</h3><p>프로젝트 생성 시 <code>Flyway</code>를 선택했다면 <code>src/main/resources/db.migration</code>이란 폴더가 있을 겁니다.
<code>V1__init.sql</code> 파일 만들어서 테이블 생성하는 SQL문을 작성하겠습니다.</p><p>자세한 Flyway 사용방법을 알고 싶으시면 <a href=/ko/>Flyway 사용법</a>에서 확인 가능합니다.</p><h4 id=v1__initsql>V1__init.sql</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>EXISTS</span> users;
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> users (
</span></span><span style=display:flex><span>    id                  bigserial <span style=color:#66d9ef>primary</span> <span style=color:#66d9ef>key</span>,
</span></span><span style=display:flex><span>    created_at          <span style=color:#66d9ef>timestamp</span>,
</span></span><span style=display:flex><span>    updated_at          <span style=color:#66d9ef>timestamp</span>,
</span></span><span style=display:flex><span>    deleted_at          <span style=color:#66d9ef>timestamp</span>,
</span></span><span style=display:flex><span>    email               varchar(<span style=color:#ae81ff>254</span>),
</span></span><span style=display:flex><span>    hashed_password     varchar(<span style=color:#ae81ff>254</span>),
</span></span><span style=display:flex><span>    name                varchar(<span style=color:#ae81ff>64</span>)
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>EXISTS</span> orders;
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> orders (
</span></span><span style=display:flex><span>    id                  bigserial <span style=color:#66d9ef>primary</span> <span style=color:#66d9ef>key</span>,
</span></span><span style=display:flex><span>    created_at          <span style=color:#66d9ef>timestamp</span>,
</span></span><span style=display:flex><span>    updated_at          <span style=color:#66d9ef>timestamp</span>,
</span></span><span style=display:flex><span>    deleted_at          <span style=color:#66d9ef>timestamp</span>,
</span></span><span style=display:flex><span>    user_id             bigint
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h3 id=userclass-생성>User.class 생성</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java></code></pre></div><h3 id=spring-security>Spring Security</h3><p>처음에는 JPA 테스트만 하기위해서 프로젝트를 생성했으나 실제 프로젝트와 유사한 환경을 만들고 싶어서 스프링 시큐리티를 추가하기로 했다.</p><h4 id=pomxml-스프링-스타터-시큐리티-추가>pom.xml 스프링 스타터 시큐리티 추가</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.boot<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>spring-boot-starter-security<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></div><h4 id=heading></h4><h3 id=junit>JUnit</h3></article></div></section><aside class=content-meta><div><section><h4 id=date>Wed Dec 6, 2023</h4><h5 id=wordcount>251 Words</h5></section><ul id=tags><li><a href=/ko/tags/spring-boot/>Spring-Boot</a></li><li><a href=/ko/tags/jpa/>Jpa</a></li></ul></div><div><a class=previous href=/ko/posts/vanilla-javascript-document-ready/>바닐라 자바스크립트로 Document ready 구현하기</a>
<a class=next href=/ko/posts/spring-boot-junit5-test-order/>Spring Boot Junit5 Test Order</a></div></aside></div></div><div class=toc-wrapper><aside class=toc-container><header><a href=#spring-boot-jpa-test-project-%25EC%2583%259D%25EC%2584%25B1><h3>Spring Boot Jpa Test Project 생성</h3></a></header><nav id=TableOfContents><ul><li><a href=#openjdk-17-설치>OpenJDK 17 설치</a><ul><li><a href=#brew-install-openjdk-17>Brew Install OpenJDK 17</a></li><li><a href=#시스템-등록-심볼릭-링크>시스템 등록 (심볼릭 링크)</a></li></ul></li><li><a href=#테스트-데이터베이스-생성>테스트 데이터베이스 생성</a><ul><li><a href=#데이터베이스-생성>데이터베이스 생성</a></li><li><a href=#유저-생성>유저 생성</a></li><li><a href=#데이터베이스-유저-전체권한-설정>데이터베이스 유저 전체권한 설정</a></li></ul></li><li><a href=#spring-boot-32-maven-프로젝트-생성>Spring Boot 3.2 Maven 프로젝트 생성</a><ul><li><a href=#applicationproperties-설정>application.properties 설정</a></li><li><a href=#flyway-테이블-생성>Flyway 테이블 생성</a></li><li><a href=#userclass-생성>User.class 생성</a></li><li><a href=#spring-security>Spring Security</a></li><li><a href=#junit>JUnit</a></li></ul></li></ul></nav></aside><a href=# id=toc-toggle></a></div></div></body></html>